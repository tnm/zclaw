<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>zclaw Docs | Getting Started</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div class="page">
      <aside class="sidebar">
        <div class="brand">
          <h1>zclaw</h1>
          <p>Field Manual</p>
        </div>
        <div class="divider"></div>
        <ul class="chapter-list">
          <li><a href="index.html">Chapter 0 · Overview</a></li>
          <li><a href="getting-started.html">Chapter 1 · Getting Started</a></li>
          <li><a href="tools.html">Chapter 2 · Tool Surface</a></li>
          <li><a href="architecture.html">Chapter 3 · Runtime Anatomy</a></li>
          <li><a href="security.html">Chapter 4 · Security &amp; Ops</a></li>
        </ul>
      </aside>

      <main class="content-wrap">
        <div class="topbar">
          <p class="kicker">zclaw docs</p>
          <div class="topbar-actions">
            <button class="menu-toggle" type="button" aria-label="Open chapter menu">☰</button>
          </div>
        </div>

        <header>
          <p class="kicker">chapter 1</p>
          <h1 class="page-title">Getting Started</h1>
          <p class="deck">Fast path from blank machine to a live ESP32 agent. Defaults are safe, and explicit flags keep runs repeatable.</p>
        </header>

        <section class="section">
          <h2>Basic Hardware</h2>
          <ul>
            <li>Tested targets: <strong>ESP32-C3</strong>, <strong>ESP32-S3</strong>, and <strong>ESP32-C6</strong>.</li>
            <li>Recommended starter board: Seeed XIAO ESP32-C3 (USB-C, small footprint, low cost).</li>
            <li>Use a real data USB cable (not charge-only), then connect board to host.</li>
            <li>Find your serial port before flashing:
              <code>/dev/cu.usbmodem*</code> (macOS) or <code>/dev/ttyUSB*</code>/<code>/dev/ttyACM*</code> (Linux).
            </li>
          </ul>
        </section>

        <section class="section">
          <h2>One-Line Bootstrap</h2>
          <pre>bash &lt;(curl -fsSL https://raw.githubusercontent.com/tnm/zclaw/main/scripts/bootstrap.sh)</pre>
          <p>Bootstrap clones or updates the repo, then runs <code>./install.sh</code>.</p>
          <ul>
            <li>Installer remembers answers in <code>~/.config/zclaw/install.env</code> (disable with <code>--no-remember</code>).</li>
            <li>Interactive flashing defaults to standard mode; encrypted flashing is opt-in with <code>--flash-mode secure</code>.</li>
          </ul>
          <p class="inline-note">Want non-interactive install? Use <code>-y</code> and explicit no/yes flags: <code>./install.sh -y --build --flash --provision --no-qemu --no-cjson</code>.</p>
        </section>

        <section class="section">
          <h2>Common Install Patterns</h2>
          <pre># Interactive default path
./install.sh

# Non-interactive provisioning path
./install.sh -y --build --flash --provision --monitor

# Explicit secure flash mode
./install.sh -y --build --flash --flash-mode secure</pre>
        </section>

        <section class="section">
          <h2>First Boot Flow</h2>
          <ol>
            <li>Flash firmware (<code>./scripts/flash.sh</code> or <code>./scripts/flash-secure.sh</code>). Flash scripts auto-detect chip target and can prompt for <code>idf.py set-target &lt;chip&gt;</code> on mismatch.</li>
            <li>Provision credentials (<code>./scripts/provision.sh --port &lt;serial-port&gt;</code>).</li>
            <li>Enter WiFi SSID, LLM provider, and API key. Optional Telegram fields can be filled now or later.</li>
            <li>Reboot and inspect logs with <code>./scripts/monitor.sh</code>.</li>
          </ol>
        </section>

        <section class="section">
          <h2>Telegram Path</h2>
          <ol>
            <li>Create bot via <a href="https://t.me/botfather">@BotFather</a>.</li>
            <li>Get chat ID via <a href="https://t.me/userinfobot">@userinfobot</a>.</li>
            <li>Set <code>--tg-token</code> and <code>--tg-chat-id</code> in provisioning.</li>
          </ol>
          <p>Runtime accepts messages only from the configured chat ID.</p>
        </section>

        <section class="section">
          <h2>Web Relay Path</h2>
          <pre># Device connected
./scripts/web-relay.sh --serial-port /dev/cu.usbmodem1101 --host 0.0.0.0 --port 8787

# No hardware (mock agent)
./scripts/web-relay.sh --mock-agent --host 0.0.0.0 --port 8787</pre>
          <p>Only one process should own the serial port at a time.</p>
          <pre># No-clone bootstrap path
bash &lt;(curl -fsSL https://raw.githubusercontent.com/tnm/zclaw/main/scripts/bootstrap-web-relay.sh) -- --serial-port /dev/cu.usbmodem1101 --host 0.0.0.0 --port 8787</pre>
        </section>

        <section class="section">
          <h2>Serial Port Conflicts</h2>
          <pre># Release ESP-IDF monitor/holders
./scripts/release-port.sh

# Relay helper can stop monitor holders automatically
./scripts/web-relay.sh --serial-port /dev/cu.usbmodem1101 --kill-monitor --host 0.0.0.0 --port 8787</pre>
        </section>

        <section class="section">
          <h2>Advanced Board Config</h2>
          <pre>source ~/esp/esp-idf/export.sh
idf.py menuconfig</pre>
          <p>Adjust GPIO safety range/allowlist under <code>zclaw Configuration -&gt; GPIO Tool Safety</code>.</p>
        </section>

        <section class="section">
          <h2>If Something Breaks</h2>
          <pre># ESP-IDF repair
cd ~/esp/esp-idf
./install.sh esp32c3,esp32s3

# Build/test routines
./scripts/build.sh
./scripts/test.sh host</pre>
        </section>

        <footer class="footer">
          <p>Next chapter: <a href="tools.html">tool surface and schedule grammar</a>.</p>
        </footer>
      </main>
    </div>
    <script src="app.js"></script>
  </body>
</html>
